<div class="error-message" id="errorMessage"></div>
<div class="fallback-bg" id="fallbackBg"></div>
<div routerLink="/advertisers" class="text-element nav-links banner">
  <img class="logo_platforma" src="images/logo_platforma_main.svg" alt="logo_platforma">
</div>
<div class="audio-enable">
  <p>PLATFORMA COMMUNITY</p>
  <button class="enable-button" id="enableBtn">ЗАПУСТИТЬ ОБОРУДОВАНИЕ</button>
</div>

<div class="preloader" id="preloader">
  <span id="counter">[00]</span>
</div>

<canvas id="canvas" #canvas></canvas>

<div class="container">
  <nav class="text-element nav-links">
    <a (click)="goToTest('/cosmos')" style="cursor: pointer;">_В КОСМОС</a>
    <a href="#"
       (click)="goToTest('/earth')"
       (mouseenter)="onNavMouseEnter('Земля')"
       (mouseleave)="onNavMouseLeave()">_АВТОРАМ И РЕКЛАМОДАТЕЛЯМ</a>
    <a href="#"
       (click)="goToTest('/mars')"
       (mouseenter)="onNavMouseEnter('Марс')"
       (mouseleave)="onNavMouseLeave()">_ПОМОГАЕМ И ПОДДЕРЖИВАЕМ</a>
    <a href="#"
       (click)="goToTest('/moon')"
       (mouseenter)="onNavMouseEnter('Луна')"
       (mouseleave)="onNavMouseLeave()">_ИСТОРИЯ</a>
    <a class="feedback-button" (click)="onModalButtonClick()">_ОБРАТНАЯ СВЯЗЬ</a>
  </nav>
  <div *ngIf="hoveredNavLabel" class="nav-hint">{{ hoveredNavLabel }}</div>

  <div class="text-element footer">
    <p>Err: [200 - СИГНАЛ ПОЛУЧЕН]<br />
      РАКЕТА: {{ todayMarsDate }}<br />
      <span style="opacity: 0.7; font-size: 0.6rem;">НАЖМИЕТ 'H' ДЛЯ НАСТРОЙКИ ОБОРУДОВАНИЯ</span>
    </p>
  </div>

  <p class="text-element division">
    СКОРОСТЬ: <span id="fpsCounter"></span>0 М/С<br>
    СОСТОЯНИЕ: В КОНТРОЛЕ<br>
    УРОВЕНЬ ДОСТУПА: ОГРАНИЧЕННЫЙ.<br>
    ТРАССИРОВКА НАЧАТА: ИСТОЧНИК НЕИЗВЕСТЕН.
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
  </p>

  <p class="text-element signal"> Выберите направление </p>

  <div class="text-element central-text">
    Искусство создания и донесения ключевых ценностей бренда<br>
    до аудитории через любые каналы коммуникации
  </div>

  <!-- Индикатор скролла -->
  <div class="scroll-indicator">
    <div class="scroll-arrow">↓</div>
    <span class="scroll-text">СКРОЛЛ ДЛЯ ПРОДОЛЖЕНИЯ</span>
  </div>
</div>

<!-- Вторая секция: Карьера -->
<section class="content-section">
  <div id="carier" class="container">
    <h1 class="fluid">Карьера</h1>
    <p>
      Наша команда объединяет профессионалов из разных областей цифрового маркетинга и коммуникаций, создавая синергию для комплексного продвижения брендов. 
      В секции карьеры представлены ключевые специалисты полного цикла — от PR-менеджеров и аккаунт-менеджеров до интернет-маркетологов маркетплейсов и креаторов инновационных проектов. 
    </p>

    <ul 
      #coursesList
      class="courses-list"
      [style.grid-template-columns]="gridColumns()"
    >
      @for (course of courses(); track trackByCourse($index, course)) {
        <li 
          [attr.data-active]="isActive($index)"
          (focus)="onFocus($event, $index)"
          (click)="onClick($event, $index)"
          (pointermove)="onPointerMove($event, $index)"
          tabindex="0"
        >
          <article>
            <h3>{{ course.title }}</h3>
            
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              fill="none"
              [innerHTML]="course.svgIcon"
            ></svg>
            
            <p class="text-element__p">{{ course.description }}</p>
            
            
            
            <img class="image-item" 
              [src]="course.imageUrl" 
              [alt]="course.title + ' course image'"
            />
          </article>
        </li>
      }
    </ul>

    <!-- Социальная ссылка -->
  </div>
</section>

<!-- Третья секция: SCROLL DOWN и модальное окно -->
<section class="modal-section">
  

  <div class="container_1"></div>

  <div #modal class="modal" [class.is-open]="isModalOpen()">
    <div class="modal-container">
      <div class="modal-left">
        <h1 class="modal-title">Обратная связь</h1>
        
        <!-- Глобальная ошибка -->
        <div *ngIf="errorMessage" class="error-message" style="color: red; margin-bottom: 15px; padding: 10px; background: #fee; border: 1px solid #fcc; border-radius: 4px;">
          {{ errorMessage }}
        </div>
        <div *ngIf="successMessage" class="error-message" style="color: green; margin-bottom: 15px; padding: 10px; background: rgb(255, 255, 255); border: 1px solid rgb(255, 255, 255); border-radius: 4px;">
          {{ successMessage }}
        </div>
        
        <!-- Индикатор отправки -->
        <div *ngIf="submitting" class="submitting-message" style="color: #007bff; margin-bottom: 15px; padding: 10px; background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 4px;">
          Отправляем данные...
        </div>
        
        <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()" novalidate>
          <div class="modal-desc">
            <div class="input-block-items">
              <div class="input-block-1" [class.error]="isFieldInvalid('actor')">
                <input 
                  id="radio-1" 
                  type="radio" 
                  name="actor" 
                  value="advertiser" 
                  formControlName="actor">
                <label for="radio-1">Я Рекламодатель</label>
              </div>
              <div class="input-block-1" [class.error]="isFieldInvalid('actor')">
                <input 
                  id="radio-2" 
                  type="radio" 
                  name="actor" 
                  value="author" 
                  formControlName="actor">
                <label for="radio-2">Я Автор</label>
              </div>
            </div>
            <div class="input-block-1" [class.error]="isFieldInvalid('actor')">
              
              <input 
                id="radio-3" 
                type="radio" 
                name="actor" 
                value="question" 
                formControlName="actor">
              <label for="radio-3">Необходимо уточнение</label>
            </div>
            
            <!-- Ошибка для actor -->
            <div 
              *ngIf="isFieldInvalid('actor')" 
              class="error-message"
              style="color: red; font-size: 14px; margin-top: 5px;"
              role="alert">
              <span *ngIf="feedbackForm.get('actor')?.errors?.['serverError']">{{ feedbackForm.get('actor')?.errors?.['serverError'] }}</span>
            </div>
          </div>
          
          <div class="form__input-block-items">
            <div class="input-block" [class.error]="isFieldInvalid('name_person')">
              <label for="name_person" class="input-label">Ваше имя</label>
              <input 
                type="text" 
                name="name_person" 
                id="name_person" 
                placeholder="Ваше имя"
                formControlName="name_person"
                autocomplete="name"
                [attr.aria-describedby]="isFieldInvalid('name_person') ? 'name-person-error' : null"
                [attr.aria-invalid]="isFieldInvalid('name_person')"
                required>
              <div 
                *ngIf="isFieldInvalid('name_person')" 
                id="name-person-error" 
                class="error-message"
                style="color: red; font-size: 14px; margin-top: 5px;"
                role="alert">
                <span *ngIf="feedbackForm.get('name_person')?.errors?.['serverError']">{{ feedbackForm.get('name_person')?.errors?.['serverError'] }}</span>
              </div>
            </div>
            
            <div class="input-block" [class.error]="isFieldInvalid('email')">
              <label for="email" class="input-label">Email</label>
              <input 
                type="email" 
                name="email" 
                id="email" 
                placeholder="Введите Email"
                formControlName="email"
                autocomplete="email"
                [attr.aria-describedby]="isFieldInvalid('email') ? 'email-error' : null"
                [attr.aria-invalid]="isFieldInvalid('email')"
                required>
              <div 
                *ngIf="isFieldInvalid('email')" 
                id="email-error" 
                class="error-message"
                style="color: red; font-size: 14px; margin-top: 5px;"
                role="alert">
                <span *ngIf="feedbackForm.get('email')?.errors?.['email']">Введите корректный email</span>
                <span *ngIf="feedbackForm.get('email')?.errors?.['serverError']">{{ feedbackForm.get('email')?.errors?.['serverError'] }}</span>
              </div>
            </div>
          </div>
        
          <div class="input-block" [class.error]="isFieldInvalid('theme')">
            <label for="theme" class="input-label">Тема обращения</label>
            <input 
              type="text" 
              name="theme" 
              id="theme" 
              placeholder="Введите тему" 
              formControlName="theme"
              autocomplete="off"
              [attr.aria-describedby]="isFieldInvalid('theme') ? 'theme-error' : null"
              [attr.aria-invalid]="isFieldInvalid('theme')"
              required>
            <div 
              *ngIf="isFieldInvalid('theme')" 
              id="theme-error" 
              class="error-message"
              style="color: red; font-size: 14px; margin-top: 5px;"
              role="alert">
              <span *ngIf="feedbackForm.get('theme')?.errors?.['serverError']">{{ feedbackForm.get('theme')?.errors?.['serverError'] }}</span>
            </div>
          </div>
        
          <div class="input-block" [class.error]="isFieldInvalid('name_company')">
            <label for="name_company" class="input-label">Название компании</label>
            <input 
              type="text" 
              name="name_company" 
              id="name_company" 
              placeholder="Введите название"
              formControlName="name_company"
              autocomplete="organization"
              [attr.aria-describedby]="isFieldInvalid('name_company') ? 'company-error' : null"
              [attr.aria-invalid]="isFieldInvalid('name_company')">
            <div 
              *ngIf="isFieldInvalid('name_company')" 
              id="company-error" 
              class="error-message"
              style="color: red; font-size: 14px; margin-top: 5px;"
              role="alert">
              <span *ngIf="feedbackForm.get('name_company')?.errors?.['serverError']">{{ feedbackForm.get('name_company')?.errors?.['serverError'] }}</span>
            </div>
          </div>
        
          <div class="input-block" [class.error]="isFieldInvalid('message')">
            <label for="message" class="input-label">Сообщение</label>
            <textarea 
              class="textarea"
              style="max-width: 400px; max-height: 200px;"
              name="message" 
              placeholder="Введите сообщение" 
              id="message" 
              formControlName="message" 
              autocomplete="off"
              [attr.aria-describedby]="isFieldInvalid('message') ? 'message-error' : null"
              [attr.aria-invalid]="isFieldInvalid('message')"
              required></textarea>
            <div 
              *ngIf="isFieldInvalid('message')" 
              id="message-error" 
              class="error-message"
              style="color: red; font-size: 14px; margin-top: 5px;"
              role="alert">
              <span *ngIf="feedbackForm.get('message')?.errors?.['minlength']">Сообщение должно содержать минимум 10 символов</span>
              <span *ngIf="feedbackForm.get('message')?.errors?.['serverError']">{{ feedbackForm.get('message')?.errors?.['serverError'] }}</span>
            </div>
          </div>
        
          <div class="input-block" [class.error]="isFieldInvalid('agreement')">
            <div class="personal-checkbox">
              <input 
                type="checkbox" 
                name="agreement" 
                id="agreement"
                formControlName="agreement"
                autocomplete="off"
                [attr.aria-describedby]="isFieldInvalid('agreement') ? 'agreement-error' : null"
                [attr.aria-invalid]="isFieldInvalid('agreement')" 
                required> 
              <label for="agreement">Согласие на обработку данных</label>
            </div>
            <div 
              *ngIf="isFieldInvalid('agreement')" 
              id="agreement-error" 
              class="error-message"
              style="color: red; font-size: 14px; margin-top: 5px;"
              role="alert">
              <span *ngIf="feedbackForm.get('agreement')?.errors?.['serverError']">{{ feedbackForm.get('agreement')?.errors?.['serverError'] }}</span>
            </div>
          </div>
        
          <div class="modal-buttons">
            <button 
              type="submit" 
              class="input-button"
              [disabled]="submitting">
              <span *ngIf="!submitting">Отправить</span>
              <span *ngIf="submitting">Отправляем...</span>
            </button>
          </div>
        </form>
      </div>

      <div class="modal-right">
        <img 
          src="/images/carier/BUSINESS.jpg" 
          alt="Login background image"
          loading="lazy">
      </div>

      <button 
        type="button"
        class="icon-button close-button"
        (click)="onCloseButtonClick()"
        aria-label="Close modal">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
          <path d="M 25 3 C 12.86158 3 3 12.86158 3 25 C 3 37.13842 12.86158 47 25 47 C 37.13842 47 47 37.13842 47 25 C 47 12.86158 37.13842 3 25 3 z M 25 5 C 36.05754 5 45 13.94246 45 25 C 45 36.05754 36.05754 45 25 45 C 13.94246 45 5 36.05754 5 25 C 5 13.94246 13.94246 5 25 5 z M 16.990234 15.990234 A 1.0001 1.0001 0 0 0 16.292969 17.707031 L 23.585938 25 L 16.292969 32.292969 A 1.0001 1.0001 0 1 0 17.707031 33.707031 L 25 26.414062 L 32.292969 33.707031 A 1.0001 1.0001 0 1 0 33.707031 32.292969 L 26.414062 25 L 33.707031 17.707031 A 1.0001 1.0001 0 0 0 32.980469 15.990234 A 1.0001 1.0001 0 0 0 32.292969 16.292969 L 25 23.585938 L 17.707031 16.292969 A 1.0001 1.0001 0 0 0 16.990234 15.990234 z"></path>
        </svg>
      </button>
    </div>
  </div>
</section>

<audio id="startClickSound" preload="auto">
  <source src="/images/advertisers/audio/preloader-2s.mp3" type="audio/mpeg">
</audio>

<audio id="preloaderSound" preload="auto">
  <source src="/images/advertisers/audio/preloader-3s.mp3" type="audio/mpeg">
</audio>

<audio id="hoverSound" preload="auto">
  <source src="/images/advertisers/audio/preloader-2s.mp3" type="audio/mpeg">
</audio>

<audio id="backgroundMusic" loop preload="auto">
  <source src="/images/advertisers/audio/music-bg.mp3" type="audio/mpeg">
</audio>